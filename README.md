# Buttonwood Token List

See https://github.com/Uniswap/token-lists or https://tokenlists.org/.

## Setup instructions

If you're running this on mac, `node-gyp` might throw some errors during `yarn install`.

Can typically be resolved by brew installing the following:

```shell
brew install pixman cairo pango
```

## Dev

The tokenlist is produced by processing the data stored in `src/tokens.json`, which maps Buttonwood wrapped tokens back to their underlying token.
It is configured this way to facilitate automatic generation of logo assets for wrapped tokens, incorporating the underlying token logo.

`npm run build` to rebuild `buttonwood.tokenlist.json` and re-fetch and regenerate the logo assets

`npm run test` to run the unit tests on the tokenlist

### Underlying token logo asset management

If an image is found at the expected path already, it will skip over it.
If not, it will attempt to retrieve an asset from vetted sources (at present just 1inch's tokenlist assets).

Manual curation can be achieved by replacing automatically retrieved assets with a preferred one.
Token assets should be 256x256px PNG files.

### Wrapped token logo generation

The wrapped token logo is generated by combining several images:

1. the mask layer doubles up as a background and is drawn first
2. the underlying token logo asset is drawn over the top, but masked by first layer (replaces colour channel values but reuses existing alpha channel)
3. the overlay layer is drawn over the top, no masking applied

The underlying token logo asset is found at `assets/tokens/<address>.png`.
The other two layers are wrapper specific, and found at `src/wrappers/<wrapper name>/mask.png` and `src/wrappers/<wrapper name>/overlay.png`.
